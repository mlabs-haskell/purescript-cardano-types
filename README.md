# purescript-cardano-types [![cardano-purescript](https://img.shields.io/badge/cardano--purescript?logo=cardano&logoColor=white&label=cardano-purescript&labelColor=blue&color=blue)](https://github.com/klntsky/cardano-purescript)

This library contains wrappers over [autogenerated bindings for CSL](https://github.com/mlabs-haskell/purescript-cardano-serialization-lib) and some types adapted from `cardano-api` and `cardano-wallet`. It is primarily used in [`cardano-transaction-lib`](https://github.com/Plutonomicon/cardano-transaction-lib/).

This library presents `Transaction` and all its structural components as PureScript algebraic data types.

- Trivial types are implemented as `newtype`s over CSL (we use [a vendored version for both nodejs & the browser, with GC added](https://github.com/mlabs-haskell/cardano-serialization-lib-gc)).
- Variant types are implemented as ADTs
- Records-like types are implemented as newtypes over PureScript records.

Here's what is included:

- `EncodeAeson`/`DecodeAeson` instances - no compatibility with CSL is maintained, because JSON encoders in CSL [are partial](https://github.com/Emurgo/cardano-serialization-lib/issues/658)
- `AsCbor` instances for types that are representable as binary
- `Show`, `Eq`, `Ord`, `Generic` instances where they make sense
- `ToMetadata`/`FromMetadata` and `ToData`/`FromData` typeclasses and some instances
- Some pretty-printing functions that render a [`TagSet` from `monad-logger`](https://pursuit.purescript.org/packages/purescript-monad-logger/1.3.1/docs/Data.Log.Tag#t:TagSet).
- `fromCsl` / `toCsl` functions that lift values between CSL and purescript domains (only for types ported from CSL)

## Types not from CSL:

- `Asset`
- `AssetClass`
- `PaymentPubKeyHash`
- `UtxoMap`
- `Chain`
- `ChainTip`
- `BlockHeaderHash`
- `DelegationsAndRewards`
- `EpochLength`
- `EraSummaries`
- `EraSummary`
- `EraSummaryParameters`
- `EraSummaryTime`
- `RelativeTime`
- `SafeZone`
- `SlotLength`

## Limitations

- `Semigroup` instances for `Value`, `ExUnits` and `Mint` are unlawful (they unsafely throw on numeric overflows)
- No `TransactionBuilder` - for a framework to build transactions, see [`cardano-transaction-lib`](https://github.com/Plutonomicon/cardano-transaction-lib/)
- No `Block`, `BlockHeader` - these are not needed for an in-browser dApp.
- Recursion max-depth issues (JavaScript...)
